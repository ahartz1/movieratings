{% extends "base.html" %}
{% load bootstrap3 %}

{% block title %}{{ view.rater.user.username }}{% endblock %}

{% block content %}
<div class="row">
  <div class="col-md-8 item-highlight top">
    <h1>{{ view.rater.user.username }}</h1>
  </div>
</div>
<div class="row">
  <div class="col-md-1 item-highlight">
    <dl>
      <dt>Gender</dt>
      <dd>{{ view.rater.get_gender_display }}</dd>
    </dl>
  </div>
  <div class="col-md-1 item-highlight">
    <dl>
      <dt>Age</dt>
      <dd>{{ view.rater.get_age_display }}</dd>
    </dl>
  </div>
  <div class="col-md-1 item-highlight">
    <dl>
      <dt>Occupation</dt>
      <dd>{{ view.rater.get_occupation_display }}</dd>
    </dl>
  </div>
  <div class="col-md-5 item-highlight">
    <dl>
      <dt>Zipcode</dt>
      <dd>{{ view.rater.zipcode }}</dd>
    </dl>
  </div>
</div>
<div>
  <br>
  <h3>{{ view.num_rated }} Rated Movie{{ view.num_rated|pluralize }}</h3>
</div>
<table class="table table-striped">
  <tr>
    <th>Movie Title</th>
    <th>Rating</th>
    <th>Rating Date</th>
    <th>Review</th>
  </tr>
  {% for rating in ratings %}
    <tr>
      <td><b><a href="{% url 'movie_detail' rating.movie.pk %}">{{ rating.movie.title }}</a></b></td>
      <td><b>{{ rating.stars }}</b>&#9733;
      {% if view.rater == user.rater and user.is_authenticated %}
        <a href="{% url 'edit_rating' view.rater.pk rating.movie.pk %}"> Edit</a> | <a href="{% url 'delete_rating' user.rater.pk rating.movie.pk %}">Delete</a>
      {% endif %}
      </td>
      <td class="text-muted">{{ rating.timestamp|date:"d M Y" }}</td>
      {% if rating.review %}
      <td><span class="review">{{ rating.review }}</span></td>
      {% endif %}
    </tr>
  {% endfor %}
</table>
<div class="text-center">
  {% bootstrap_pagination page_obj pages_to_show=5 %}
</div>
{% endblock %}
