{% extends "base.html" %}
{% load bootstrap3 %}

{% block title %}{{ rater.user.username }}{% endblock %}

{% block content %}
<div class="row">
  <div class="col-md-8 item-highlight top">
    <h1>{{ rater.user.username }}</h1>
  </div>
</div>
<div class="row">
  <div class="col-md-1 item-highlight">
    <dl>
      <dt>Gender</dt>
      <dd>{{ rater.gender }}</dd>
    </dl>
  </div>
  <div class="col-md-1 item-highlight">
    <dl>
      <dt>Age</dt>
      <dd>{{ rater.age }}</dd>
    </dl>
  </div>
  <div class="col-md-1 item-highlight">
    <dl>
      <dt>Occupation</dt>
      <dd>{{ rater.occupation }}</dd>
    </dl>
  </div>
  <div class="col-md-5 item-highlight">
    <dl>
      <dt>Zipcode</dt>
      <dd>{{ rater.zipcode }}</dd>
    </dl>
  </div>
</div>
<div>
  <br>
  <h3>{{ num_rated }} Movie{{ num_rated|pluralize }} Rated</h3>
</div>
<table class="table table-striped">
  <tr>
    <th>Movie Title</th>
    <th>Rating</th>
    <th>Rating Date</th>
    <th>Review</th>
  </tr>
  {% for rating in ratings %}
    <tr>
      <td><b><a href="{% url 'movie_detail' rating.movie.pk %}">{{ rating.movie.title }}</a></b></td>
      <td><b>{{ rating.stars }}</b>&#9733;
      {% if rater == user.rater and user.is_authenticated %}
        <a href="{% url 'edit_rating' rater.pk rating.movie.pk %}"> Edit</a> | <a href="{% url 'delete_rating' user.rater.pk rating.movie.pk %}">Delete</a>
      {% endif %}
      </td>
      <td class="text-muted">{{ rating.timestamp|date:"d M Y" }}</td>
      {% if rating.review %}
      <td><span class="review">{{ rating.review }}</span></td>
      {% endif %}
    </tr>
  {% endfor %}
</table>
<div class="text-center">
  <nav>
    <ul class="pagination">
      <li><a href="?page=1">&laquo;</a></li>
      {% if ratings.has_previous %}
        <li><a href="?page={{ ratings.previous_page_number }}">previous</a></li>
      {% endif %}

        <li class="active"><a href="?page={{ ratings.number }}">{{ ratings.number }}</a></li>

      {% if ratings.has_next %}
        <li><a href="?page={{ ratings.next_page_number }}">next</a></li>
      {% endif %}
      <li><a href="?page={{ ratings.paginator.num_pages }}">&raquo;</a></li>
    </ul>
  </nav>
</div>
{% endblock %}
